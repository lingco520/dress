<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.daqsoft.mapper.client.wifiAnalysis.YCHBHWifiAnalysisMapper">
    <select id="getWifiByDay" resultType="map" parameterType="map">
        <![CDATA[
	        SELECT
                ap_name as apName,COUNT(id) AS num
            FROM
                wifi_zx
            WHERE
                vcode = #{vcode}
            AND insert_time BETWEEN #{startTime}
            AND #{endTime} GROUP BY ap_name
		]]>
    </select>
    <!-- 银川花博会查询wifi点位列表 -->
    <select id="getYCHBHApNameList" resultType="String" parameterType="map">
        <![CDATA[
	        select ap_name as apName from wifi_zx WHERE vcode = #{vcode} GROUP BY ap_name
		]]>
    </select>
    <select id="getWifiHours" resultType="map" parameterType="map">
	        SELECT
                COUNT(1) AS num,
                CONCAT(DATE_FORMAT(insert_time, '%H'),':00') AS dtime
            FROM
                wifi_zx
            WHERE
                vcode = #{vcode}
            AND insert_time BETWEEN #{startTime}
            AND #{endTime}
            <if test="name != null and '' != name">
              AND ap_name = #{name}
            </if>
            GROUP BY
                dtime ASC;
    </select>
</mapper>